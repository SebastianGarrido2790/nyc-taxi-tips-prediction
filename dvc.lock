schema: '2.0'
stages:
  data_ingestion:
    cmd: uv run python -m src.pipeline.stage_01_data_ingestion
    deps:
    - path: config/config.yaml
      hash: md5
      md5: db9dd09604798c6585bb9a08810cbfd4
      size: 1181
    - path: config/params.yaml
      hash: md5
      md5: f7b9ec2f46f4cc49afa9fc7142dda1ea
      size: 1154
    - path: config/schema.yaml
      hash: md5
      md5: a9e1eaf36947b58c5d00bd8a53d0268e
      size: 545
    - path: data/external/NYC_Taxi_Zones_20260215.csv
      hash: md5
      md5: 9d4fe704d598a9a796f1b9f6dbfb6af3
      size: 3753425
    - path: data/raw/Distilled_2023_Yellow_Taxi_Trip_Data.txt
      hash: md5
      md5: f3d96a96c11c42b40593d7e81db7af16
      size: 535356502
    - path: src/components/data_ingestion.py
      hash: md5
      md5: ff2251ac40dc869dfe1de26edde76f79
      size: 6000
    - path: src/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: a83ccfc8c1c0a1546a708607e2ecd269
      size: 1589
    outs:
    - path: artifacts/data_ingestion/enriched_trip_data.parquet
      hash: md5
      md5: 720206f5c3e20dd3834009faf342fa5d
      size: 135203561
  data_validation:
    cmd: uv run python -m src.pipeline.stage_02_data_validation
    deps:
    - path: artifacts/data_ingestion/enriched_trip_data.parquet
      hash: md5
      md5: 720206f5c3e20dd3834009faf342fa5d
      size: 135203561
    - path: config/config.yaml
      hash: md5
      md5: db9dd09604798c6585bb9a08810cbfd4
      size: 1181
    - path: config/schema.yaml
      hash: md5
      md5: a9e1eaf36947b58c5d00bd8a53d0268e
      size: 545
    - path: src/components/data_validation.py
      hash: md5
      md5: 4b80f6f12b764315f176213c424aac99
      size: 3189
    - path: src/pipeline/stage_02_data_validation.py
      hash: md5
      md5: 5ecb8a24557772bb873d9522d4e30528
      size: 1326
    outs:
    - path: artifacts/data_validation/status.txt
      hash: md5
      md5: 86e6a2f694c57a675b3e2da6b95ff9ba
      size: 23
  data_transformation:
    cmd: uv run python -m src.pipeline.stage_03_data_transformation
    deps:
    - path: artifacts/data_ingestion/enriched_trip_data.parquet
      hash: md5
      md5: 720206f5c3e20dd3834009faf342fa5d
      size: 135203561
    - path: config/config.yaml
      hash: md5
      md5: db9dd09604798c6585bb9a08810cbfd4
      size: 1181
    - path: src/components/data_transformation.py
      hash: md5
      md5: 525249ca95cd5d4aa44b7a561b118cc3
      size: 5674
    - path: src/pipeline/stage_03_data_transformation.py
      hash: md5
      md5: 38d6015b2e328b84fedef78422e1ed6a
      size: 1483
    outs:
    - path: artifacts/data_transformation/cleaned_trip_data.parquet
      hash: md5
      md5: 2d46fb6ef4be0c6e4718a90eee0fe471
      size: 123396262
  feature_engineering:
    cmd: uv run python -m src.pipeline.stage_04_feature_engineering
    deps:
    - path: artifacts/data_transformation/cleaned_trip_data.parquet
      hash: md5
      md5: 2d46fb6ef4be0c6e4718a90eee0fe471
      size: 123396262
    - path: config/config.yaml
      hash: md5
      md5: db9dd09604798c6585bb9a08810cbfd4
      size: 1181
    - path: src/components/feature_engineering.py
      hash: md5
      md5: 603587783ed1ce52b5f6138dc115aa1b
      size: 5596
    - path: src/pipeline/stage_04_feature_engineering.py
      hash: md5
      md5: baf71440563d20d42b0accb28a6887ff
      size: 1481
    outs:
    - path: artifacts/feature_engineering/test.parquet
      hash: md5
      md5: 5c2430c03ae278382703ab7f60fc46a3
      size: 26311026
    - path: artifacts/feature_engineering/train.parquet
      hash: md5
      md5: 63a0835a3739ef3ddf404520348a0e54
      size: 109256448
    - path: artifacts/feature_engineering/val.parquet
      hash: md5
      md5: e1d0381f95067803c18abeee04cf634b
      size: 24960666
  model_trainer:
    cmd: uv run python -m src.pipeline.stage_05_model_trainer
    deps:
    - path: artifacts/feature_engineering/test.parquet
      hash: md5
      md5: 5c2430c03ae278382703ab7f60fc46a3
      size: 26311026
    - path: artifacts/feature_engineering/train.parquet
      hash: md5
      md5: 63a0835a3739ef3ddf404520348a0e54
      size: 109256448
    - path: config/config.yaml
      hash: md5
      md5: db9dd09604798c6585bb9a08810cbfd4
      size: 1181
    - path: config/params.yaml
      hash: md5
      md5: f7b9ec2f46f4cc49afa9fc7142dda1ea
      size: 1154
    - path: src/components/model_trainer.py
      hash: md5
      md5: 15e40efb524073b8dcf36918d9c3fac2
      size: 8010
    - path: src/pipeline/stage_05_model_trainer.py
      hash: md5
      md5: 78eee4cfe35a1991ffa84cb0868242ca
      size: 1354
    outs:
    - path: artifacts/model_trainer/model.joblib
      hash: md5
      md5: 06b35d43acff0c11a17f8233dd250845
      size: 1409
  model_evaluation:
    cmd: uv run python -m src.pipeline.stage_06_model_evaluation
    deps:
    - path: artifacts/feature_engineering/test.parquet
      hash: md5
      md5: 5c2430c03ae278382703ab7f60fc46a3
      size: 26311026
    - path: artifacts/model_trainer/model.joblib
      hash: md5
      md5: 06b35d43acff0c11a17f8233dd250845
      size: 1409
    - path: config/config.yaml
      hash: md5
      md5: db9dd09604798c6585bb9a08810cbfd4
      size: 1181
    - path: config/params.yaml
      hash: md5
      md5: f7b9ec2f46f4cc49afa9fc7142dda1ea
      size: 1154
    - path: src/components/model_evaluation.py
      hash: md5
      md5: 33fee43fffd799d28bdf73044d699172
      size: 3116
    - path: src/components/predict_model.py
      hash: md5
      md5: 87f18118d3f55f04e1a2bf230afc7a8d
      size: 3632
    - path: src/pipeline/stage_06_model_evaluation.py
      hash: md5
      md5: 53df7dd791fda27032f22a26694cb8f7
      size: 2121
    outs:
    - path: artifacts/model_evaluation/metrics.json
      hash: md5
      md5: fd62c6e54e27c61bb2abb692af15e53f
      size: 114
    - path: artifacts/predictions/inference_results.csv
      hash: md5
      md5: da98521412a909ac3614c3f9de8da576
      size: 17529511
